<!DOCTYPE html>
<html data-bs-theme="light" lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Mesure_De</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/Main_login.css">
    <link rel="stylesheet" href="assets/css/Tableau_bord.css">
</head>

<body>
    <div class="page">
        <div class="container_h"><img src="assets/img/equans-smi.svg" width="230" height="110"></div>
        <div class="element">
            <div class="icon"><button class="btn parametre-btn" type=""><span class="bar bar1"></span><span class="bar bar2"></span><span class="bar bar3"></span></button></div>
            <div class="content">
                <div class="date-picker-group">
                    <div class="date-picker"><label class="form-label">Avant travaux</label><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightpick@1.3.4/css/lightpick.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightpick@1.3.4/lightpick.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<div class="date-input-container">
    <input type="text" id="dateRangePicker1">
    <img src="assets/img/calender.webp" alt="Calendar Icon" id="calendarIcon">
</div>

<script>
    $(function(){
        moment.locale('fr');
        let dateRangePicker1 = document.getElementById('dateRangePicker1');
        let pickerRange1 = new Lightpick({
            field: dateRangePicker1,
            singleDate: false,
            onSelect: function(start, end){
                let str = '';
                str += start ? start.format('DD/MM/YYYY') + ' - ' : '';
                str += end ? end.format('DD/MM/YYYY') : '...';
                dateRangePicker1.value = str;
            }
        });
        document.getElementById('calendarIcon').addEventListener('click', function() {
            pickerRange1.show();
        });
    });
</script>
</div>
                    <div class="date-picker"><label class="form-label">Apr√®s travaux</label><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightpick@1.3.4/css/lightpick.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightpick@1.3.4/lightpick.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<div class="date-input-container">
    <input type="text" id="dateRangePicker2">
    <img src="assets/img/calender.webp" alt="Calendar Icon" id="calendarIcon">
</div>

<script>
    $(function(){
        moment.locale('fr');
        let dateRangePicker2 = document.getElementById('dateRangePicker2');
        let pickerRange2 = new Lightpick({
            field: dateRangePicker2,
            singleDate: false,
            onSelect: function(start, end){
                let str = '';
                str += start ? start.format('DD/MM/YYYY') + ' - ' : '';
                str += end ? end.format('DD/MM/YYYY') : '...';
                dateRangePicker1.value = str;
            }
        });
        document.getElementById('calendarIcon').addEventListener('click', function() {
            pickerRange2.show();
        });
    });
</script>
</div>
                </div>
            </div>
        </div>
        <div class="container-g"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightpick@1.3.4/css/lightpick.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightpick@1.3.4/lightpick.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<canvas id="chartjs-bar" width="180" height="60"></canvas>

<script>
        const ctx = document.getElementById('chartjs-bar').getContext('2d');
        let chart;
        const data = {
            "2025-04-01": 2.5, "2025-04-02": 3.1, "2025-04-03": 2.8, "2025-04-04": 3.5,
            "2025-04-05": 5.9, "2025-04-06": 3.2, "2025-04-07": 3.0, "2025-04-08": 2.7,
            "2025-04-09": 1.0, "2025-04-10": 3.6, "2025-04-11": 2.6, "2025-04-12": 3.3,
            "2025-04-13": 3.0, "2025-04-14": 4.0, "2025-04-15": 8.0, "2025-04-16": 3.1,
            "2025-04-17": 3.2, "2025-04-18": 1.8, "2025-04-19": 3.4, "2025-04-20": 6.6,
            "2025-04-21": 7.0, "2025-04-22": 2.9, "2025-04-23": 3.6, "2025-04-24": 3.1,
            "2025-04-25": 3.2, "2025-04-26": 7.2, "2025-04-27": 3.5, "2025-04-28": 3.0,
            "2025-04-29": 3.4, "2025-04-30": 9.4
        };

        function updateChart() {
            const labels = Object.keys(data);
            const values = labels.map(date => data[date]);
            if (chart) {
                chart.destroy();
            }
            chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Consommation en kWh',
                        backgroundColor: 'rgba(0, 120, 215, 0.2)',
                        borderColor: 'rgba(0, 120, 215, 1)',
                        hoverBackgroundColor: 'rgba(0, 120, 215, 0.4)',
                        hoverBorderColor: 'rgba(0, 120, 215, 1)',
                        data: values,
                        barPercentage: 1,
                        categoryPercentage: 0.4
                    }]
                },
                options: {
                    scales: {
                        y: {
                            grid: {
                                display: false
                            },
                            stacked: false,
                            title: {
                                display: true,
                                text: 'kWh'
                            }
                        },
                        x: {
                            stacked: false,
                            grid: {
                                color: "transparent"
                            },
                            ticks:{
                                maxRotation: 90,
                                minRotation: 90
                            }
                        }
                    }
                }
            });
        }

        function resizeCanvas() {
            const canvas = document.getElementById('chartjs-bar');
            const container = canvas.parentNode;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            updateChart();
        }

        window.addEventListener('resize', resizeCanvas);
        updateChart();
        resizeCanvas(); // Initial resize to set correct dimensions
    </script>
</div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/Main_login.js"></script>
    <script src="assets/js/Tableu_bord.js"></script>
</body>

</html>